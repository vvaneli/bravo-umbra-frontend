<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <!-- Dialogflow -->
  <link rel="stylesheet"
    href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css">
  <script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>
  <title>Electronic Health Record</title>
</head>

<body onLoad="onPageLoad()">

  <header class="column is-three-quarters">
    <nav id="nav1" class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="#">
          <img class="logo is-96x96" src="img/bravo-logo-thumb.png" />
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <!-- <a href="#" class="navbar-item"><span class="material-symbols-outlined">home</span><span class="text">Home</span></a> -->
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">patient_list</span><span
              class="text">Patients</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">add_box</span><span
              class="text">Requests</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">content_paste</span><span
              class="text">Reports</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">calendar_month</span><span
              class="text">Schedule</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">perm_contact_calendar</span><span
              class="text">Contacts</span></a>
        </div>
        <div class="navbar-end">
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">notifications</span><span
              class="text">Alerts</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">account_circle</span><span
              class="text">Profile</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">logout</span>Log out</a>
        </div>
      </div>
      </div>
    </nav>
  </header>

  <div class="columns">
    <main class="column is-three-quarters">

      <!-- BLOCK 1 PATIENT PROFILE -->
      <!-- 1A (Identity): START -->
      <section class="hero is-primary is-flex ml-3 mb-5">
        <div class="hero-body container">
          <figure class="image is-128x128 mb-3">
            <img class="is-rounded" src="img/patient-profile-photo.jpg" alt="photo of patient" />
          </figure>
          <p class="title is-4"><span class="data">Charlene Elaine Mooij</span></p>
          <p class="subtitle PatientID is-6"><span class="data">P123456789</span></p>
        </div>
      </section>
      <!-- 1A: END -->
      <div class="columns ml-3">
        <!-- 1B (Patient profile): START -->
        <article id="patient-profile" class="card panel is-primary half-width mr-3">
          <header class="card-header panel-heading">
            <h2 class="card-header-title ">Patient Profile</h2>
            <button onclick="cardToggle(this)" class="card-toggle card-header-icon" aria-label="more options">
              <span class="card-open icon material-symbols-outlined">
                keyboard_arrow_down
              </span>
              <span class="card-close icon material-symbols-outlined">
                keyboard_arrow_up
              </span>
            </button>
          </header>
          <section id="patient-profile-card-body">
            <nav class="panel-tabs">
              <a onClick="openPanel('patientProfileTab1', 'patientProfile', this)" class="tab">Profile</a>
              <a onClick="openPanel('patientProfileTab2', 'patientProfile', this)" class="tab">Contact</a>
              <a onClick="openPanel('patientProfileTab3', 'patientProfile', this)" class="tab">Notes</a>
            </nav>
            <div class="panel-block column">
              <section id="patientProfileTab1" class="patientProfile tab-panel tab-default">
                <h3 class="title is-4">Profile</h3>
                <p class="Age"><span class="data">5</span></p>
                <p class="DateOfBirth"><span class="data">2019-06-01</span></p>
                <p class="Gender"><span class="data">Female</span></p>
                <p class="Address"><span class="data">123 Elm Street, Amsterdam, NL</span></p>
                <button class="button is-light">Edit</button>
              </section>
              <section id="patientProfileTab2" class="patientProfile tab-panel">
                <h3 class="title is-4">Emergency contact</h3>
                <p class="EmergencyContact-Name"><span class="data">Anna Mooij</span></p>
                <p class="EmergencyContact-Relation"><span class="data">Mother</span></p>
                <p class="EmergencyContact-PhoneNumber"><span class="data">+31 6 98765432</span></p>
                <button class="button is-light">Edit</button>
              </section>
              <section id="patientProfileTab3" class="patientProfile tab-panel">
                <h3 class="title is-4">Personalizations</h3>
                <p class="FavoriteToy"><span class="data">A soft rabbit called Raggy.</span></p>
                <button class="button is-light">Edit</button>
              </section>
            </div>
          </section>
        </article>
        <!-- 1A: END -->
        <!-- 1B (Medical profile)): START -->
        <article id="medical-profile" class="card panel is-primary half-width mr-3">
          <header class="card-header panel-heading">
            <h2 class="card-header-title ">Medical Profile</h2>
            <button onclick="cardToggle(this)" class="card-toggle card-header-icon" aria-label="more options">
              <span class="card-open icon material-symbols-outlined">
                keyboard_arrow_down
              </span>
              <span class="card-close icon material-symbols-outlined">
                keyboard_arrow_up
              </span>
            </button>
          </header>
          <section id="medical-profile-card-body">
            <nav class="panel-tabs">
              <a onClick="openPanel('medicalProfileTab1', 'medicalProfile', this)" class="tab">Current</a>
              <a onClick="openPanel('medicalProfileTab2', 'medicalProfile', this)" class="tab">History</a>
            </nav>
            <div class="panel-block column">
              <section id="medicalProfileTab1" class="column medicalProfile tab-panel tab-default">
                <!-- <h3 class="title is-3">Current</h3> -->
                <!-- JSON: MedicalHistory -->
                <h3 class="title is-4">Current Medications</h3>
                <p class="CurrentMedications"><span class="data">Ibuprofen 200mg</span></p>
                <br />
                <h3 class="title is-4">Allergies</h3>
                <p class="Allergies-Allergen"><span class="data">Peanuts</span></p>
                <p class="Allergies-Reaction"><span class="data">Hives</span></p>
                <p class="Allergies-Allergen"><span class="data">Penicillin</span></p>
                <p class="Allergies-Reaction"><span class="data">Rash</span></p>
                <button class="button is-light">Edit</button>
              </section>
              <section id="medicalProfileTab2" class="column medicalProfile tab-panel">
                <!-- <section class="section tab json medical-history"> -->
                <!-- <h3 class="title is-3">History</h3> -->
                <!-- JSON: MedicalHistory -->
                <h3 class="title is-4">Past Illnesses</h3>
                <p class="PastIllnesses-Year"><span class="data">2022</span></p>
                <p class="PastIllnesses-Illness"><span class="data">Chickenpox</span></p>
                <button class="button is-light">More</button>
                <h3 class="title is-4">Family History</h3>
                <p class="FamilyHistory-Relation"><span class="data">Father</span></p>
                <p class="FamilyHistory-Condition"><span class="data">Hypertension</span></p>
                <p class="FamilyHistory-Relation"><span class="data">Mother</span></p>
                <p class="FamilyHistory-Condition"><span class="data">Asthma</span></p>
                <button class="button is-light">Edit</button>
              </section>
            </div>
          </section>
        </article>
        <!-- 1B MEDICAL PROFILE: END -->
      </div>
      <!-- BLOCK 1: END -->

      <!-- BLOCK 2 CONSULTATION: START -->
      <article class="card panel is-link ml-3 mb-3">
        <header class="card-header panel-heading">
          <h2 class="card-header-title has-text-white">Consultations</h2>
          <button class="card-header-icon" aria-label="more options">
            <span class="card-open icon material-symbols-outlined">
              keyboard_arrow_down
            </span>
            <span class="card-close icon material-symbols-outlined">
              keyboard_arrow_up
            </span>
          </button>
        </header>
        <section id="medical-profile-card-body">
          <nav class="panel-tabs">
            <a onClick="openPanel('consultationTab1', 'consultation', this)" class="tab">Current</a>
            <a onClick="openPanel('consultationTab2', 'consultation', this)" class="tab">Upcoming</a>
            <a onClick="openPanel('consultationTab3', 'consultation', this)" class="tab">Past</a>
          </nav>
          <div class="panel-block column">
            <section id="consultationTab1" class="columns consultation tab-panel tab-default">
              <div class="columns">
                <div class="column">
                  <h3 class="title is-4">Consultation</h3>
                  <!-- JSON: VisitInformation -->
                  <p class="VisitDate"><span class="data">2024-08-10</span></p>
                  <p class="ReasonForVisit"><span class="data">Broken Shoulder</span></p>
                  <p class="VisitID"><span class="data">V789101112</span></p>
                  <p class="PrimaryPhysician"><span class="data">Dr. Sarah Jansen</span></p>
                  <button class="button is-light">Edit</button>
                </div>
                <div class="column">
                  <h3 class="title is-4">Diagnosis</h3>
                  <!-- JSON: Diagnosis -->
                  <p class="AffectedSide"><span class="data">Left Shoulder</span></p>
                  <p class="Severity"><span class="data">Moderate</span></p>
                  <p class="DiagnosisDescription"><span class="data">Fracture of shoulder, unspecified, initial
                      encounter</span></p>
                  <p class="DiagnosisCode"><span class="data">S42.009A</span></p>
                  <button class="button is-light">Edit</button>
                </div>
                <div class="column">
                  <h3 class="title is-4">Treatment Plan</h3>
                  <!-- JSON: TreatmentPlan -->
                  <h4 class="title is-5">Procedures</h4>
                  <p class="Treatment-Date"><span class="data">2024-08-10</span></p>
                  <p class="Treatment-Procedure"><span class="data">X-ray of shoulder</span></p>
                  <p class="Treatment-Result"><span class="data">Fracture Confirmed</span></p>
                  <p class="Treatment-Procedure"><span class="data">Immobilization</span></p>
                  <p class="Treatment-Result"><span class="data">Shoulder sling</span></p>
                  <p class="Treatment-Procedure"><span class="data">Pain Management</span></p>
                  <p class="Treatment-Medication"><span class="data">Ibuprofen 200mg</span></p>
                  <h4 class="title is-5">FollowUp</h4>
                  <p class="FollowUp-Date"><span class="data">2024-08-17</span></p>
                  <p class="FollowUp-Purpose"><span class="data">Check healing progress, adjust sling if
                      necessary</span>
                  </p>
                  <h4 class="title is-5">Notes</h4>
                  <p class="TreatmentPlan-Notes"><span class="data">Patient advised to avoid physical activities for 6
                      weeks. Follow up with orthopedic specialist if pain persists.</span></p>
                  <button class="button is-light">Edit</button>
                </div>
                <div class="column">
                  <h4 class="title is-4">Billing</h4>
                  <!-- JSON: BillingInformation -->
                  <p class="TotalCost"><span class="data">€350.00</span></p>
                  <p class="PaymentStatus"><span class="data">Pending</span></p>
                  <p class="InsuranceProvider"><span class="data">Allianz Health Insurance</span></p>
                  <p class="PolicyNumber"><span class="data">NL4567890123</span></p>
                  <p class="BillingCode"><span class="data">99203</span></p>
                  <button class="button is-light">Edit</button>
                </div>
            </section>
            <section id="consultationTab2" class="column consultation tab-panel">
              <h3 class="title is-4 FollowUp">Upcoming appointments</h3>
              <!-- JSON: TreatmentPlan > FollowUp -->
              <p class="Treatment-Date"><span class="data">2024-08-17</span></p>
              <p class="Treatment-Procedure"><span class="data">X-ray of Shoulder</span></p>
              <p class="Treatment-Purpose"><span class="data">Check healing progress, adjust sling if necessary</span>
              </p>
              <button class="button is-light">More</button>
              <footer class="card-footer">
                <button class="button is-link">Add New</button>
              </footer>
            </section>
            <section id="consultationTab3" class="column consultation tab-panel">
              <h3 class="title is-4">Past appointments</h3>
              <!-- JSON: MedicalHistory -->
              <p class="PastIllnesses-Year"><span class="data">2022</span></p>
              <p class="PastIllnesses-Illness"><span class="data">Chickenpox</span></p>
              <button class="button is-light">More</button>
            </section>
          </div>
        </section>
      </article>
      <!-- BLOCK 2: END -->

      <!-- BLOCK 3 UMBRA: START -->
      <!-- <div class="columns ml-3 mr-3"> -->
      <article id="umbra-card" class="card panel ml-3">
        <header class="card-header panel-heading">
          <h2 class="card-header-title has-text-white">Umbra &ndash; Redact PII</h2>
          <button class="card-header-icon" aria-label="more options">
            <span class="card-open icon material-symbols-outlined">
              keyboard_arrow_down
            </span>
            <span class="card-close icon material-symbols-outlined">
              keyboard_arrow_up
            </span>
          </button>
        </header>
        <nav class="pagination is-centered card-footer" role="navigation" aria-label="pagination">
          <a onClick="pageBack('', '', this)" class="pagination-previous" title="Step 1"><span class="material-symbols-outlined">
              arrow_back
            </span></a>
          <a onClick="pageNext('', '', this)" class="pagination-next"><span class="material-symbols-outlined">
              arrow_forward
            </span></a>
          <ul class="pagination-list">
            <li>
              <a class="pagination-link" aria-label="step 1" aria-current="step">1</a>
            </li>
            <li>
              <a href="#" class="pagination-link" aria-label="step 3">2</a>
            </li>
            <li>
              <a href="#" class="pagination-link" aria-label="step 3">3</a>
            </li>
            <li>
              <a href="#" class="pagination-link" aria-label="step 4">4</a>
            </li>
            <li>
              <a href="#" class="pagination-link" aria-label="step 5">5</a>
            </li>
          </ul>
        </nav>
        <section class="section tab" id="umbra">
          <!-- Umbra Step 1 -->
          <div class="columns">
            <div class="column step" id="step1">
              <h3 class="title is-5">Step 1A: Add texts you wish to redact</h3>
              <p class="umbra-description">Umbra is a tool that locally redacts private information from texts
                before
                sending to
                AI cloud services. Private information will be locally restored for you to use.</p>
              <label for="box1"></label>
              <textarea id="box1" name="box1" class="box" rows="5"
                placeholder="Insert text for privacy redaction"></textarea>
              <button id="getAnswersButton" style="display:none;" onclick="processText()">Process Text</button>
              <h3 class="title is-5">Step 1B: Result</h3>
              <div id="loading">
                <div class="spinner"></div>
                <p>Loading Umbra AI, please wait...</p>
              </div>
              <div id="results"></div>
            </div>
            <!-- Umbra Step 2 -->
            <div class="column step" id="step2">
              <h3 class="title is-5">Step 2: Preview redaction</h3>
              <label for="box2"></label>
              <box id="box2" name="box2" class="box" rows="5" placeholder="Redaction preview appears here" readonly>
              </box>
              <div class="buttons">
                <button onclick="highlightText()" class="button is-light">Show redaction</button>
                <button onclick="replaceText()" class="button is-light">Next</button>
              </div>
            </div>
            <div class="column step" id="step3">
              <!-- Umbra Step 3A -->
              <h3 class="title is-5">Step 3A: Redacted draft</h3>
              <label for="box3"></label>
              <textarea id="box3" name="box3" class="box" rows="5" placeholder="Redated texts appears here"></textarea>
              <!-- Umbra Step 3B -->
              <h3 class="title is-5">Step 3B: Task instructions for AI</h3>
              <label for="box3-prmpt"></label>
              <textarea id="box3-prmpt" name="box3-prmpt" class="box" rows="5"
                placeholder="Tell Gemini AI what you want it to do with the redacted draft."></textarea>
              <div class="buttons">
                <button onclick="send2api()" class="button is-light">Send to Gemini Cloud Service
                  <span class="material-symbols-outlined icon-small">
                    open_in_new
                  </span>
                </button>
              </div>
              <small><a
                  href="https://support.google.com/gemini/answer/13594961?visit_id=638588064666691455-2002261725&p=privacy_notice&rd=1#privacy_notice">Your
                  privacy and Gemini AI</a></small>
            </div>
            <!-- Umbra Step 4 -->
            <div class="column step" id="step4">
              <h3 class="title is-5">Step 4: Result of task completed by AI</h3>
              <label for="box4"></label>
              <textarea id="box4" name="box4" class="box" rows="5" placeholder="Result from AI appears here"
                readonly></textarea>
              <small>Gemini AI may display inaccurate information. Please double check its responses.</small>
              <p>Click 'Next' to restore redacted information.</p>
              <div class="buttons">
                <button onclick="replaceMarkers()" class="button is-light">Next</button>
                <!-- <button onclick="share()">share</button> -->
              </div>
            </div>
            <!-- Umbra Step 5 -->
            <div class="column step" id="step5">
              <h3 class="title is-5">Step 5: Final texts</h3>
              <label for="box5"></label>
              <textarea id="box5" name="box5" class="box" rows="5"
                placeholder="Final texts (with redacted information restored) appear here" readonly></textarea>
              <div class="buttons">
                <!-- <button onclick="replaceMarkers()" class="button is-light">Next</button> -->
                <!-- <button onclick="share()" class="button is-light">Copy text</button> -->
              </div>
            </div>
          </div>

        </section>
      </article>
      <!-- </div> -->
      <!-- BLOCK 3: END -->
    </main>
    <!-- CHAT BLOCK: START -->
    <aside id="chatbot" class="column is-one-quarter">
      <!-- <h2 class="panel-heading">Gemini Chatbot</h2> -->
      <!-- <h2>Gemini</h2> -->
      <!-- DIALOGFLOW CX – REPLACE CHATBOT 'project-id' AND 'agent-id' -->
      <df-messenger location="eu" project-id="df-samples-ldid" agent-id="418b18b0-8690-481d-aa7f-1ac6ddc1a49d"
        language-code="en" max-query-length="-1">
        <df-messenger-chat chat-title=" " chat-title-icon="" bot-writing-text="bot-writing-text" bot-writing-image=""
          bot-actor-image="" user-actor-image="" placeholder-text="What's on your mind?">
        </df-messenger-chat>
      </df-messenger>
    </aside>
    <!-- CHAT BLOCK: END -->
  </div>
  <!-- </div> -->
  <footer class="footer column is-three-quarters">
    <div class="content has-text-centered">
      <p>This is a demo. It does not depict a real person or real data.</p>
    </div>
  </footer>
</body>
<script src="js/bravo.js"></script>
<!-- <script src="js/umbra.js"></script> -->

</html>