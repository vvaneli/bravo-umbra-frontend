<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@24,400,1,0" />
  <link rel="stylesheet"
    href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css">
  <link rel="stylesheet" href="css/styles.css">
  <!-- Dialogflow -->
  <script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>
  <title>Electronic Health Record</title>
</head>

<body onLoad="onPageLoad()">
  <!-- If there an API key had been entered, then hide div.alert-banner -->
  <div class="alert-banner"><small>This is a demo. You need to have <a href="https://ai.qqmber.com/"
        target="_blank">entered an API key</a> for it to work. Use the Chrome browser on a wide screen.</small></div>
  <header class="column is-three-quarters">
    <nav id="nav1" class="navbar" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <!-- <a class="navbar-item" href="#"> -->
        <a href="#">
          <img class="logo is-96x96" src="img/bravo-logo-thumb.png" />
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">patient_list</span><span
              class="text">Patients</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">add_box</span><span
              class="text">Requests</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">content_paste</span><span
              class="text">Reports</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">calendar_month</span><span
              class="text">Schedule</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">perm_contact_calendar</span><span
              class="text">Contacts</span></a>
        </div>
        <div class="navbar-end">
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">notifications</span><span
              class="text">Alerts</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">account_circle</span><span
              class="text">Profile</span></a>
          <a href="#" class="navbar-item"><span class="material-symbols-outlined">logout</span>Log out</a>
        </div>
      </div>
      </div>
    </nav>
  </header>

  <div class="columns">
    <main class="column is-three-quarters">

      <!-- BLOCK 1 PATIENT PROFILE -->
      <!-- 1A (Photo banner): START -->
      <section class="hero is-primary is-flex mb-5">
        <div class="hero-body container">
          <figure class="image is-128x128 mb-3">
            <img class="is-rounded" src="img/patient-profile-photo.jpg" alt="photo of patient" />
          </figure>
          <p class="title is-4"><span class="data">Charlene Elaine Mooij</span></p>
          <p class="subtitle PatientID is-6"><span class="data">P123456789</span></p>
        </div>
      </section>
      <!-- 1A: END -->
      <div class="columns">
        <!-- 1B (Patient profile): START -->
        <article id="patient-profile" class="card panel is-primary half-width ml-3 mr-1">
          <header class="card-header panel-heading">
            <h2 class="card-header-title ">Patient Profile</h2>
            <button onclick="cardToggle(this)" class="card-toggle card-header-icon material-symbols-outlined"
              aria-label="toggle section contents">
              keyboard_arrow_up
            </button>
          </header>
          <section id="patient-profile-card-body">
            <nav class="panel-tabs">
              <a onClick="openPanel('patientProfileTab1', 'patientProfile', this)" class="tab">Profile</a>
              <a onClick="openPanel('patientProfileTab2', 'patientProfile', this)" class="tab">Contact</a>
              <a onClick="openPanel('patientProfileTab3', 'patientProfile', this)" class="tab">Notes</a>
            </nav>
            <div class="panel-block column">
              <section id="patientProfileTab1" class="patientProfile tab-panel tab-default">
                <h3 class="title is-4">Profile</h3>
                <p class="Age"><span class="data">5</span></p>
                <p class="DateOfBirth"><span class="data">2019-06-01</span></p>
                <p class="Gender"><span class="data">Female</span></p>
                <p class="Address"><span class="data">123 Elm Street, Amsterdam, NL</span></p>
                <button class="button is-light">Edit</button>
              </section>
              <section id="patientProfileTab2" class="patientProfile tab-panel">
                <h3 class="title is-4">Emergency contact</h3>
                <p class="EmergencyContact-Name"><span class="data">Anna Mooij</span></p>
                <p class="EmergencyContact-Relation"><span class="data">Mother</span></p>
                <p class="EmergencyContact-PhoneNumber"><span class="data">+31 6 98765432</span></p>
                <button class="button is-light">Edit</button>
              </section>
              <section id="patientProfileTab3" class="patientProfile tab-panel">
                <h3 class="title is-4">Personalizations</h3>
                <p class="FavoriteToy"><span class="data">A soft rabbit called Raggy.</span></p>
                <button class="button is-light">Edit</button>
              </section>
            </div>
          </section>
        </article>
        <!-- 1B: END -->
        <!-- 1C (Medical profile): START -->
        <article id="medical-profile" class="card panel is-primary half-width ml-3 mr-3">
          <header class="card-header panel-heading">
            <h2 class="card-header-title ">Medical Profile</h2>
            <button onclick="cardToggle(this)" class="card-toggle card-header-icon material-symbols-outlined"
              aria-label="toggle section contents">
              keyboard_arrow_up
            </button>
          </header>
          <section id="medical-profile-card-body">
            <nav class="panel-tabs">
              <a onClick="openPanel('medicalProfileTab1', 'medicalProfile', this)" class="tab">Current</a>
              <a onClick="openPanel('medicalProfileTab2', 'medicalProfile', this)" class="tab">History</a>
            </nav>
            <div class="panel-block column">
              <section id="medicalProfileTab1" class="medicalProfile tab-panel tab-default">
                <!-- JSON: MedicalHistory -->
                <div class="columns">
                  <div class="column">
                    <h3 class="title is-4">Current Medications</h3>
                    <p class="CurrentMedications"><span class="data">Ibuprofen 200mg</span></p>
                    <!-- <br /> -->
                  </div>
                  <div class="column">
                    <h3 class="title is-4">Allergies</h3>
                    <p class="Allergies-Allergen"><span class="data">Peanuts</span></p>
                    <p class="Allergies-Reaction"><span class="data">Hives</span></p>
                    <p class="Allergies-Allergen"><span class="data">Penicillin</span></p>
                    <p class="Allergies-Reaction"><span class="data">Rash</span></p>
                    <button class="button is-light">Edit</button>
                  </div>
                </div>
              </section>
              <section id="medicalProfileTab2" class="medicalProfile tab-panel">
                <!-- JSON: MedicalHistory -->
                <div class="columns">
                  <div class="column">
                    <h3 class="title is-4">Past Illnesses</h3>
                    <p class="PastIllnesses-Year"><span class="data">2022</span></p>
                    <p class="PastIllnesses-Illness"><span class="data">Chickenpox</span></p>
                    <button class="button is-light">More</button>
                  </div>
                  <div class="column">
                    <h3 class="title is-4">Family History</h3>
                    <p class="FamilyHistory-Relation"><span class="data">Father</span></p>
                    <p class="FamilyHistory-Condition"><span class="data">Hypertension</span></p>
                    <p class="FamilyHistory-Relation"><span class="data">Mother</span></p>
                    <p class="FamilyHistory-Condition"><span class="data">Asthma</span></p>
                    <button class="button is-light">Edit</button>
                  </div>
                </div>
              </section>
            </div>
          </section>
        </article>
        <!-- 1C: END -->
      </div>
      <!-- BLOCK 1: END -->

      <!-- BLOCK 2 CONSULTATION: START -->
      <article class="card panel is-link mb-6">
        <header class="card-header panel-heading">
          <h2 class="card-header-title has-text-white">Consultations</h2>
          <button onclick="cardToggle(this)" class="card-toggle card-header-icon material-symbols-outlined"
            aria-label="toggle section contents">
            keyboard_arrow_up
          </button>
        </header>
        <section id="medical-profile-card-body">
          <nav class="panel-tabs">
            <a onClick="openPanel('consultationTab1', 'consultation', this)" class="tab">Current</a>
            <a onClick="openPanel('consultationTab2', 'consultation', this)" class="tab">Upcoming</a>
            <a onClick="openPanel('consultationTab3', 'consultation', this)" class="tab">Past</a>
          </nav>
          <div class="panel-block column">
            <section id="consultationTab1" class="consultation tab-panel tab-default">
              <div class="columns">
                <div class="column">
                  <h3 class="title is-4">Consultation</h3>
                  <!-- JSON: VisitInformation -->
                  <p class="VisitDate"><span class="data">2024-08-10</span></p>
                  <p class="ReasonForVisit"><span class="data">Broken Shoulder</span></p>
                  <p class="VisitID"><span class="data">V789101112</span></p>
                  <p class="PrimaryPhysician"><span class="data">Dr. Sarah Jansen</span></p>
                  <button class="button is-light">Edit</button>
                </div>
                <div class="column">
                  <h3 class="title is-4">Diagnosis</h3>
                  <!-- JSON: Diagnosis -->
                  <p class="AffectedSide"><span class="data">Left Shoulder</span></p>
                  <p class="Severity"><span class="data">Moderate</span></p>
                  <p class="DiagnosisDescription"><span class="data">Fracture of shoulder, unspecified, initial
                      encounter</span></p>
                  <p class="DiagnosisCode"><span class="data">S42.009A</span></p>
                  <button class="button is-light">Edit</button>
                </div>
                <div class="column">
                  <h3 class="title is-4">Treatment Plan</h3>
                  <!-- JSON: TreatmentPlan -->
                  <h4 class="title is-5">Procedures</h4>
                  <p class="Treatment-Date"><span class="data">2024-08-10</span></p>
                  <p class="Treatment-Procedure"><span class="data">X-ray of shoulder</span></p>
                  <p class="Treatment-Result"><span class="data">Fracture Confirmed</span></p>
                  <p class="Treatment-Procedure"><span class="data">Immobilization</span></p>
                  <p class="Treatment-Result"><span class="data">Shoulder sling</span></p>
                  <p class="Treatment-Procedure"><span class="data">Pain Management</span></p>
                  <p class="Treatment-Medication"><span class="data">Ibuprofen 200mg</span></p>
                  <h4 class="title is-5">FollowUp</h4>
                  <p class="FollowUp-Date"><span class="data">2024-08-17</span></p>
                  <p class="FollowUp-Purpose"><span class="data">Check healing progress, adjust sling if
                      necessary</span>
                  </p>
                  <h4 class="title is-5">Notes</h4>
                  <p class="TreatmentPlan-Notes"><span class="data">Patient advised to avoid physical activities for 6
                      weeks. Follow up with orthopedic specialist if pain persists.</span></p>
                  <button class="button is-light">Edit</button>
                </div>
                <div class="column">
                  <h4 class="title is-4">Billing</h4>
                  <!-- JSON: BillingInformation -->
                  <p class="TotalCost"><span class="data">€350.00</span></p>
                  <p class="PaymentStatus"><span class="data">Pending</span></p>
                  <p class="InsuranceProvider"><span class="data">Allianz Health Insurance</span></p>
                  <p class="PolicyNumber"><span class="data">NL4567890123</span></p>
                  <p class="BillingCode"><span class="data">99203</span></p>
                  <button class="button is-light">Edit</button>
                </div>
              </div>
            </section>
            <section id="consultationTab2" class="column consultation tab-panel">
              <h3 class="title is-4 FollowUp">Upcoming appointments</h3>
              <!-- JSON: TreatmentPlan > FollowUp -->
              <p class="Treatment-Date"><span class="data">2024-08-17</span></p>
              <p class="Treatment-Procedure"><span class="data">X-ray of Shoulder</span></p>
              <p class="Treatment-Purpose"><span class="data">Check healing progress, adjust sling if necessary</span>
              </p>
              <button class="button is-light">More</button>
              <footer class="card-footer">
                <button class="button is-link">Add New</button>
              </footer>
            </section>
            <section id="consultationTab3" class="column consultation tab-panel">
              <h3 class="title is-4">Past appointments</h3>
              <!-- JSON: MedicalHistory -->
              <p class="PastIllnesses-Year"><span class="data">2022</span></p>
              <p class="PastIllnesses-Illness"><span class="data">Chickenpox</span></p>
              <button class="button is-light">More</button>
            </section>
          </div>
        </section>
      </article>
      <!-- BLOCK 2: END -->

      <!-- BLOCK 3 UMBRA: START -->
      <article id="umbra-card" class="card panel mb-5">
        <header class="card-header panel-heading">
          <h2 class="card-header-title has-text-white">Umbra</h2>
          <button onclick="cardToggle(this)" class="card-toggle card-header-icon material-symbols-outlined"
            aria-label="toggle section contents">
            keyboard_arrow_up
          </button>
        </header>
        <div>
          <section class="section description">
            <p><strong>Use Gemini AI in the Cloud without disclosing Personally Identifiable Information</strong></p>
          </section>
          <section class="section tab column" id="umbra-card-contents">
            <!-- Umbra Step 1 -->
            <div id="step1">
              <!-- <div class="progress-bar"></div> -->
              <progress class="progress-bar" max="100" value="33"></progress>
              <h3 class="title is-5">Step 1: Task for AI</h3>
              <p><strong>Tell Gemini AI what you'd like it to do.</strong></p>
              <p class="step-explain">Type a custom prompt, or select one of the examples provided. Select 'Send to
                Gemini
                AI' to continue.</p>
              <label for="box1-prmpt"></label>
              <textarea id="box1-prmpt" name="box1-prmpt" class="box" required
                placeholder="Type your instruction to Gemini AI…"></textarea>
              <div class="">
                <button onclick="example1()" class="button is-info is-rounded is-light">Example 1: Write a letter to the
                  insurer</button>
                <button onclick="example2()" class="button is-info is-rounded is-light">Example 2: Write a personalized
                  story for the
                  patient</button>
              </div>
              <div class="buttons">
                <button onclick="clearContents()" class="button is-light">Reset</button>
                <button onclick="goToStep2(); send2api()" class="button is-dark has-text-white">Send to Gemini AI<span
                    class="material-symbols-sharp">
                    send
                  </span>
                </button>
              </div>
              <!-- <small><a
                href="https://support.google.com/gemini/answer/13594961?visit_id=638588064666691455-2002261725&p=privacy_notice&rd=1#privacy_notice">Your
                privacy and Gemini AI <span class="material-symbols-outlined icon-small">
                  open_in_new
                </span></a></small> -->
            </div>
            <!-- Umbra Step 2 -->
            <div class="column step" id="step2">
              <!-- <div class="progress-bar"></div> -->
              <progress class="progress-bar" max="100" value="66"></progress>
              <h3 class="title is-5">Step 2: Response from AI</h3>
              <p><strong>Task result with PII redacted.</strong></p>
              <p class="step-explain">Select &lsquo;Restore PII&rsquo; to accept this result, or &lsquo;Back&rsquo; to
                adjust your prompt to try again.</p>
              <label for="box2"></label>
              <textarea id="box2" name="box2" class="box" placeholder="Response from AI appears here"
                readonly></textarea>
              <!-- <p>Click 'Next' to restore redacted information.</p> -->
              <div class="buttons">
                <button onclick="goToStep1()" class="button is-light">Back</button>
                <button onclick="goToStep3(); replaceMarkers()" class="button is-dark has-text-white">Restore PII <span
                    class="material-symbols-sharp">
                    person_add
                  </span></button>
              </div>
            </div>
            <!-- Umbra Step 3 -->
            <div class="column step" id="step3">
              <!-- <div class="progress-bar"></div> -->
              <progress class="progress-bar" max="100" value="100"></progress>
              <h3 class="title is-5">Step 3: Final texts</h3>
              <p><strong>Task result with PII restored.</strong></p>
              <p class="step-explain">Select &lsquo;Copy&rsquo; to copy the text below to clipboard, or
                &lsquo;Restart&rsquo; to return to step 1.</p>
              <label for="box3"></label>
              <textarea id="box3" name="box3" class="box"
                placeholder="Final texts (with redacted information restored) appear here" readonly></textarea>
              <div class="buttons">
                <button onclick="goToStep1(); clearContents()" class="button is-light">Restart</button>
                <button onclick="copyText()" class="button is-dark has-text-white">Copy <span
                    class="material-symbols-outlined">
                    content_paste
                  </span></button>
              </div>
            </div>
          </section>
        </div>
      </article>
      <!-- </div> -->

      <!-- BLOCK 3: END -->
    </main>
    <!-- CHAT BLOCK: START -->
    <!-- https://cloud.google.com/dialogflow/cx/docs/concept/integration/dialogflow-messenger -->
    <aside id="chatbot" class="column is-one-quarter">
      <!-- DIALOGFLOW CX – REPLACE CHATBOT 'project-id' AND 'agent-id' -->
      <df-messenger location="eu" project-id="" agent-id="" language-code="en" max-query-length="-1">
        <df-messenger-chat chat-title="Umbra" chat-title-icon=""
          chat-subtitle="Use Gemini AI in the Cloud without disclosing PII" bot-writing-text="bot-writing-text"
          bot-writing-image="" bot-actor-image="" user-actor-image=""
          placeholder-text="Type your instruction to Gemini AI...">
        </df-messenger-chat>
      </df-messenger>
    </aside>
    <!-- CHAT BLOCK: END -->
  </div>

  <footer class="footer column is-three-quarters content has-text-centered">
    <p><small><em>This demonstration does not depict a real patient, real data, or a real
          hospital.</em></small></p>
    <hr />
    <p><small>Personally Identifiable Information (PII) is redacted from texts before sending to AI cloud services, in
        compliance with GDPR law. <a href="https://ai.qqmber.com/" target="_blank">Find out more about this
          project.</a></small></p>

    <small>Made by <a href="https://2qr.at/paul">Paul</a> &amp; <a href="https://github.com/vvaneli">Viviane</a> | ©
      2024</small>

  </footer>
</body>
<script src="js/bravo.js"></script>

</html>
